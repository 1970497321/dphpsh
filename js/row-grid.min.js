var rowGrid=function(e,f){function v(g){for(var c=[g];(g=g.nextSibling)&&9!==g.nodeType;)1===g.nodeType&&c.push(g);return c}function t(g,c,h){var e=0,d=[];h=Array.prototype.slice.call(h||g.querySelectorAll(c.itemSelector));var f=h.length,l=getComputedStyle(g);g=Math.floor(g.getBoundingClientRect().width)-parseFloat(l.getPropertyValue("padding-left"))-parseFloat(l.getPropertyValue("padding-right"));for(var l=[],b,k,n,a=0;a<f;++a)(b=h[a].getElementsByTagName("img")[0])?((k=parseInt(b.getAttribute("width")))||
b.setAttribute("width",k=b.offsetWidth),(n=parseInt(b.getAttribute("height")))||b.setAttribute("height",n=b.offsetHeight),l[a]={width:k,height:n}):(h.splice(a,1),--a,--f);f=h.length;for(b=0;b<f;++b){h[b].classList?(h[b].classList.remove(c.firstItemClass),h[b].classList.remove(c.lastRowClass)):h[b].className=h[b].className.replace(new RegExp("(^|\\b)"+c.firstItemClass+"|"+c.lastRowClass+"(\\b|$)","gi")," ");e+=l[b].width;d.push(h[b]);if(b===f-1)for(a=0;a<d.length;a++)0===a&&(d[a].className+=" "+c.lastRowClass),
d[a].style.cssText="width: "+l[b+parseInt(a)-d.length+1].width+"px;height: "+l[b+parseInt(a)-d.length+1].height+"px;margin-right:"+(a<d.length-1?c.minMargin+"px":0);if(e+c.maxMargin*(d.length-1)>g){k=e+c.maxMargin*(d.length-1)-g;a=d.length;(c.maxMargin-c.minMargin)*(a-1)<k?(n=c.minMargin,k-=(c.maxMargin-c.minMargin)*(a-1)):(n=c.maxMargin-k/(a-1),k=0);for(var r,p=0,a=0;a<d.length;a++){r=d[a];var q=l[b+parseInt(a)-d.length+1].width,m=q-q/e*k,q=Math.round(l[b+parseInt(a)-d.length+1].height*(m/q));.5<=
p+1-m%1?(p-=m%1,m=Math.floor(m)):(p+=1-m%1,m=Math.ceil(m));r.style.cssText="width: "+m+"px;height: "+q+"px;margin-right: "+(a<d.length-1?n:0)+"px";0===a&&(r.className+=" "+c.firstItemClass)}d=[];e=0}}}if(null!==e&&void 0!==e)if("appended"===f){f=JSON.parse(e.getAttribute("data-row-grid"));var u=e.getElementsByClassName(f.lastRowClass)[0],u=v(u);t(e,f,u)}else t(e,f),e.setAttribute("data-row-grid",JSON.stringify(f)),f.resize&&window.addEventListener("resize",function(g){t(e,f)})};